---
title: 20180915pointnet论文3——TensorFlow源码阅读
date: 2020-01-11 20:59:40
mathjax: true
tags:
- 深度学习
- 三维点云
categories:
- 深度学习
---

### 目录说明

根目录下：

train.py用于点云分类训练

provider.py 用于点云的数据预处理（旋转，抖动等）

evaluate用于评估训练结果。

其他目录：**data**目录下存放用于训练的样例文件h5，test_files与train_files中列举的用于训练及测试的文件路径。**log** 存放的是训练结果，默认情况下只存放最近一次训练结果。**models**存放的是模型文件，pointnet_cls.py（POINTNET）和pointnet_cls_basic.py（baseline模型）中的MLP是分类模型结构。pointnet_seg.py是点云分割模型网络；transform_nets.py为原始点云对称变换以及特征变换，即论文中的T-net网络。



### 1，数据预处理provider

前面下载数据以及后面的hdf5格式加载数据就略过了。说一说数据预处理部分干了些什么。

1，shuffle_data函数

根据labels的长度创建idx下标集合，对下标集合随机打乱，返回打乱的数据data[idx,...] 和labels[idx]。

2，随机旋转点云rotate_point_cloud（参数batch_data）

遍历这批点云物体batch_data.shape[0] 即B的大小。

旋转角度是随机生成的，乘以2$\pi$ ，即使角度多大都没关系，反正按角度算。

计算cos和sin值。

注意此处的旋转矩阵。原一个点云物体k的大小的n*3与旋转矩阵做点积。其实就是物体逆时针旋转那么多角度。对这一批点云物体都做这一个随机旋转角度值。

$$\left[\begin{array}{lll}{cosval} & {0} & {sinval} \\ {0} & {1} & {0} \\ {-sinval} & {0} & {cosval}\end{array}\right]$$



rotate_point_cloud_by_angle旋转也是同理，不过是指定角度旋转。角度作为参赛输入函数。

3，jitter_point_cloud随机抖动点云

sigma = 0.01， clip = 0.05

sigma * sigma * np.random.randn(B, N, C) 是均值为sigma的正态分布数据，大小是$B\times N \times C$

将这些数值切割到-0.05到0.05之间，并与原始点云的坐标数据相加。

相当于给点云数据加微小的噪声。



### 2，基础模型baseline

pointnet_cla_basic.py 函数





### 3，POINTNET网络



### 4，训练与评估



### Reference



